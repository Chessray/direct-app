<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <!--
        This is a configuration file for Struts2 context to be used by TC Direct application.
    -->
    <constant name="struts.objectFactory" value="spring"/>
    <constant name="struts.devMode" value="true"/>
    <constant name="struts.locale" value="en_US"/>
    <constant name="struts.custom.i18n.resources" value="Messages"/>
    <constant name="struts.ui.theme" value="simple"/>
    <constant name="struts.convention.exclude.parentClassLoader" value="true" />
    <constant name="struts.convention.action.fileProtocols" value="jar,vfsfile,vfszip" />
    <constant name="struts.multipart.maxSize" value="20971520" />



    <package name="default" extends="struts-default" namespace="/">
        <result-types>
            <result-type name="json" class="com.topcoder.direct.services.view.ajax.CustomFormatAJAXResult">
            </result-type>
        </result-types>
        <interceptors>
            <interceptor name="preProcessor" class="actionPreProcessor"/>
            <interceptor name="projectAccessGuard"
                         class="com.topcoder.direct.services.view.interceptor.ProjectAccessInterceptor"/>
            <interceptor name="contestAccessGuard"
                         class="com.topcoder.direct.services.view.interceptor.ContestAccessInterceptor"/>
            <interceptor name="internalStatsGuard"
                         class="com.topcoder.direct.services.view.interceptor.InternalStatsAccessInterceptor"/>
            <interceptor name="authnInterceptor"
                         class="authenticationInterceptor"/>
            <interceptor name="loggingInterceptor"
                         class="loggingInterceptor"/>
            <interceptor name="contestFeeAccessInterceptor" class="contestFeeAccessInterceptor"/>
            <interceptor-stack name="preProcessorStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="preProcessor"/>
            </interceptor-stack>
            <interceptor-stack name="securedPreProcessorStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="authnInterceptor"/>
                <interceptor-ref name="preProcessor"/>
            </interceptor-stack>
            <interceptor-stack name="securedProjectPreProcessorStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="authnInterceptor"/>
                <interceptor-ref name="projectAccessGuard"/>
                <interceptor-ref name="preProcessor"/>
            </interceptor-stack>
            <interceptor-stack name="securedContestPreProcessorStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="authnInterceptor"/>
                <interceptor-ref name="contestAccessGuard"/>
                <interceptor-ref name="preProcessor"/>
            </interceptor-stack>
            <interceptor-stack name="securedContestStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="authnInterceptor"/>
                <interceptor-ref name="contestAccessGuard"/>
            </interceptor-stack>
            <interceptor-stack name="securedInternalStatsStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="authnInterceptor"/>
                <interceptor-ref name="internalStatsGuard"/>
            </interceptor-stack>
            <interceptor-stack name="securedDefaultStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="authnInterceptor"/>
            </interceptor-stack>
            <!-- base stack -->
            <interceptor-stack name="baseStack">
                <interceptor-ref name="exception">
                    <param name="logEnabled">true</param>
                    <param name="logLevel">ERROR</param>
                </interceptor-ref>
            </interceptor-stack>

			<interceptor-stack name="projectFeeStack">
				<interceptor-ref name="loggingInterceptor"/>
                <interceptor-ref name="exception">
                    <param name="logEnabled">true</param>
                    <param name="logLevel">ERROR</param>
                </interceptor-ref>
                <interceptor-ref name="alias"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="i18n"/>
                <interceptor-ref name="params">
                  <param name="acceptParamNames">contestId,projectId</param>
                  <param name="excludeParams">dojo\..*,^struts\..*,directjs.*</param>
                </interceptor-ref>
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="chain"/>
                <interceptor-ref name="debugging"/>
                <interceptor-ref name="scopedModelDriven"/>
                <interceptor-ref name="modelDriven"/>
                <interceptor-ref name="fileUpload"/>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="multiselect"/>
                <interceptor-ref name="staticParams"/>
                <interceptor-ref name="actionMappingParams"/>
                <interceptor-ref name="params">
                  <param name="excludeParams">dojo\..*,^struts\..*,directjs.*</param>
                </interceptor-ref>
                <interceptor-ref name="conversionError"/>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>                
				<interceptor-ref name="authnInterceptor"/>      
				<interceptor-ref name="contestFeeAccessInterceptor"/>   
            </interceptor-stack>
        </interceptors>

        <default-interceptor-ref name="baseStack"/>


        <global-results>
            <result name="error">/error.jsp</result>
            <result name="permissionDenied">/error.jsp</result>
            <result name="anonymous" type="redirectAction">
                <param name="actionName">home</param>
                <param name="namespace">/</param>
            </result>
        </global-results>

        <global-exception-mappings>
            <exception-mapping result="error" exception="java.lang.Exception"/>
        </global-exception-mappings>

        <action name="home" class="com.topcoder.direct.services.view.action.LandingPage">
            <interceptor-ref name="preProcessorStack"/>
            <result name="success">/WEB-INF/index.jsp</result>
            <result name="input">/WEB-INF/index.jsp</result>
        </action>
        <action name="login" class="com.topcoder.direct.services.view.action.LoginAction">
            <interceptor-ref name="preProcessorStack"/>
            <result name="success" type="redirectAction">
                <param name="actionName">dashboardActive</param>
                <param name="namespace">/</param>
            </result>
            <result name="forward" type="redirect">${forwardUrl}</result>
            <result name="input">/WEB-INF/index.jsp</result>
        </action>
        <action name="logout" class="com.topcoder.direct.services.view.action.LogoutAction">
            <result name="success" type="redirect">/scorecard/logout</result>
	    <!-- type="redirectAction">
                <param name="actionName">home</param>
                <param name="namespace">/</param>
            </result> -->
        </action>
        <action name="dashboard" class="com.topcoder.direct.services.view.action.dashboard.DashboardAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/dashboard.jsp</result>
        </action>
        <action name="dashboardLatest" class="com.topcoder.direct.services.view.action.dashboard.DashboardAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/dashboard-latest.jsp</result>
        </action>
        <action name="dashboardActive" class="com.topcoder.direct.services.view.action.dashboard.ActiveContestsAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/dashboard-active.jsp</result>
        </action>
        <action name="dashboardEnterprise" class="enterpriseDashboardAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success">/WEB-INF/dashboard-enterprise.jsp</result>
        </action>
        <action name="dashboardEnterpriseZoom" class="zoomEnterpriseDashboardAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="dashboardEnterpriseAJAX" class="ajaxEnterpriseDashboardAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="dashboardGetOptionsForClientAJAX" method="getOptionsForClient" class="ajaxEnterpriseDashboardAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="dashboardGetOptionsForBillingAJAX" method="getOptionsForBilling" class="ajaxEnterpriseDashboardAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="dashboardGetCostBreakDownAJAX" method="getCostBreakDown" class="ajaxEnterpriseDashboardAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="dashboardEnterpriseTableViewCall" class="enterpriseDashboardAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="dashboardEnterpriseDrillTableCall" class="enterpriseDashboardAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="dashboardEnterpriseVolumeView" class="dashboardEnterpriseVolumeView">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="zoomEnterpriseDashboardVolumeView" class="zoomEnterpriseDashboardVolumeView">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="createProjectView" class="com.topcoder.direct.services.view.action.ForwardAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/dashboard-create-project.jsp</result>
        </action>

         <action name="createNewProject" class="com.topcoder.direct.services.view.action.ForwardAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/dashboard-create-new-project.jsp</result>
        </action>

        <action name="createProject" class="com.topcoder.direct.services.view.action.project.CreateProjectAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success" type="redirectAction">
                <param name="actionName">createProjectView</param>
                <param name="namespace">/</param>
            </result>
        </action>
        <action name="updateDirectProjectStatus" class="com.topcoder.direct.services.view.action.project.UpdateProjectStatusAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json"/>
            <result name="error" type="json"/>
        </action>

        <action name="createProjectAndContest" class="com.topcoder.direct.services.view.action.project.CreateProjectAndAddContestAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success" type="redirectAction">
                <param name="actionName">home</param>
                <param name="namespace">/launch</param>
            </result>
        </action>
        <action name="dashboardSearchView" class="com.topcoder.direct.services.view.action.dashboard.DashboardSearchAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/dashboard-search.jsp</result>
        </action>
    <action name="allProjects" class="com.topcoder.direct.services.view.action.dashboard.DashboardSearchAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/dashboard-search.jsp</result>
        </action>
        <action name="dashboardSearch" class="com.topcoder.direct.services.view.action.dashboard.DashboardSearchAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/dashboard-search.jsp</result>
            <result name="download" type="stream">
                <param name="contentDisposition">attachment;filename=searchResult.xls</param>
                <param name="contentType">application/vnd.ms-excel</param>
                <param name="inputName">viewData.inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>
        <action name="contestDetails" class="com.topcoder.direct.services.view.action.contest.ContestDetailsAction">
            <interceptor-ref name="securedContestPreProcessorStack"/>
            <result name="success">/WEB-INF/contest-details.jsp</result>
        </action>
        <action name="projectDetails" class="com.topcoder.direct.services.view.action.project.ProjectContestsAction">
            <interceptor-ref name="securedProjectPreProcessorStack"/>
            <result name="success">/WEB-INF/contest-view.jsp</result>
        </action>
        <action name="currentProjectDetails" class="com.topcoder.direct.services.view.action.project.CurrentProjectContestsAction">
            <interceptor-ref name="securedProjectPreProcessorStack"/>
            <result name="success">/WEB-INF/contest-view.jsp</result>
        </action>
        <action name="permissionsView" class="com.topcoder.direct.services.view.action.ForwardAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/permissions.jsp</result>
        </action>
        <action name="currentProjectPermissionsView" class="com.topcoder.direct.services.view.action.ForwardAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/permissions.jsp</result>
        </action>
        <action name="ProjectGamePlanView" class="com.topcoder.direct.services.view.action.project.ProjectGamePlanAction">
            <interceptor-ref name="securedProjectPreProcessorStack"/>
            <result name="success">/WEB-INF/project-gameplan.jsp</result>
        </action>
        <action name="projectGamePlan" class="com.topcoder.direct.services.view.action.project.CurrentProjectGamePlanAction">
          <interceptor-ref name="securedPreProcessorStack"/>
          <result type="stream">
             <param name="contentType">text/html</param>
             <param name="inputName">inputStream</param>
           </result>
        </action>
        <action name="contestRegistrants" class="com.topcoder.direct.services.view.action.contest.ContestRegistrantsAction">
            <interceptor-ref name="securedContestStack"/>
            <result name="success">/WEB-INF/contest-registrants.jsp</result>
            <result name="download" type="stream">
                <param name="contentDisposition">attachment;filename=contest-registrants.xls</param>
                <param name="contentType">application/vnd.ms-excel</param>
                <param name="inputName">viewData.inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>
        <action name="contestIssuesTracking" class="com.topcoder.direct.services.view.action.contest.ContestIssuesTrackingAction">
            <interceptor-ref name="securedContestStack"/>
            <result name="success">/WEB-INF/contest-issues-tracking.jsp</result>
        </action>
        <action name="projectOverview" class="com.topcoder.direct.services.view.action.project.ProjectOverviewAction">
            <interceptor-ref name="securedProjectPreProcessorStack"/>
            <result name="success">/WEB-INF/project-overview.jsp</result>
        </action>
         <action name="projectIssueTracking" class="com.topcoder.direct.services.view.action.project.ProjectIssuesTrackingAction">
            <interceptor-ref name="securedProjectPreProcessorStack"/>
            <result name="success">/WEB-INF/project-issues-tracking.jsp</result>
        </action>
        <action name="currentProjectOverview"
                class="com.topcoder.direct.services.view.action.project.CurrentProjectOverviewAction">
            <interceptor-ref name="securedProjectPreProcessorStack"/>
            <result name="success">/WEB-INF/project-overview.jsp</result>
        </action>
        <action name="projectContestsHealthAJAX" class="projectContestsHealthAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success">/WEB-INF/project-overview-contests-health.jsp</result>
        </action>
        <action name="calendar" class="com.topcoder.direct.services.view.action.dashboard.CalendarAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/calendar.jsp</result>
        </action>

        <action name="permissionsView" class="com.topcoder.direct.services.view.action.ForwardAction">
            <interceptor-ref name="securedPreProcessorStack"/>
            <result name="success">/WEB-INF/project-permissions.jsp</result>
        </action>

        <action name="permissionsUpdateSuccess" class="permissionsUpdateSuccessAction"> 
            <result name="success" type="redirectAction">
                <param name="actionName">dashboardNotifications</param>
                <param name="pn">perm</param>
            </result>
            <!--<interceptor-ref name="preProcessor"/>-->
            <!-- <result name="success">/WEB-INF/notification/dashboard-notifications.jsp?pn=perm</result>-->
        </action>

        <action name="getProjectPermissions" class="getProjectPermissionsAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="getUser" class="searchUserAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="updateProjectPermissions" class="updateProjectPermissionsAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="redirectAction">
                <param name="actionName">permissionsUpdateSuccess</param>
                <param name="namespace">/</param>
            </result>
        </action>

        <action name="dashboardNotifications" class="com.topcoder.direct.services.view.action.notification.DashboardNotificationsAction">
            <!--<interceptor-ref name="securedPreProcessorStack"/>-->
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <!--<interceptor-ref name="preProcessor"/>-->
            <result name="success">/WEB-INF/notification/dashboard-notifications.jsp</result>
        </action>

        <action name="updateNotifications" class="com.topcoder.direct.services.view.action.notification.UpdateNotificationsAction">
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="dashboardVMAction" class="dashboardVMAction">
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/vmmanager/dashboard-vm-management.jsp</result>
        </action>
        <action name="launchVMInstance" class="launchVMInstanceAction">
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="terminateVMInstance" class="terminateVMInstanceAction">
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="showVMInstances" class="showVMInstancesAction">
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="dashboardReports" class="dashboardReportsAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/report/dashboard-pipeline.jsp</result>
        </action>

        <action name="dashboardGetCostReport" class="dashboardCostReportAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/report/dashboard-cost-report.jsp</result>
            <result name="download" type="stream">
                <param name="contentDisposition">attachment;filename=${viewData.excelFileName}</param>
                <param name="contentType">application/vnd.ms-excel</param>
                <param name="inputName">viewData.inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>

        <action name="dashboardCostReport" class="dashboardShowCostReportAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/report/dashboard-cost-report.jsp</result>
        </action>
        
        <action name="dashboardParticipationReport" class="dashboardShowParticipationReportAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/report/dashboard-participation-report.jsp</result>
        </action>
        
        <action name="dashboardGetParticipationReport" class="dashboardParticipationReportAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/report/dashboard-participation-report.jsp</result>
        </action>

        <action name="dashboardGetBillingCostReport" class="dashboardBillingCostReportAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/report/dashboard-billing-cost-report.jsp</result>
            <result name="download" type="stream">
                <param name="contentDisposition">attachment;filename=billing_cost_report.xls</param>
                <param name="contentType">application/vnd.ms-excel</param>
                <param name="inputName">viewData.inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>

        <action name="updateInvoiceRecords" class="updateInvoiceRecordsAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

         <action name="dashboardBillingCostReport" class="dashboardShowBillingCostReportAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/report/dashboard-billing-cost-report.jsp</result>
        </action>

        <action name="dashboardPipelineReport" class="dashboardPipelineAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success">/WEB-INF/report/dashboard-pipeline.jsp</result>
            <result name="download" type="stream">
                <param name="contentDisposition">attachment;filename=pipeline-details.xls</param>
                <param name="contentType">application/vnd.ms-excel</param>
                <param name="inputName">viewData.inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>

        <action name="dashboardPipelineDraftsRatio" class="dashboardPipelineDraftsRatioAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="getProjectCopilotsWidgetData" method="getProjectCopilotsWidgetData" class="com.topcoder.direct.services.view.action.project.ProjectCopilotsWidgetAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="createProjectForum" class="createProjectForumAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="projectContestsCalendarView" class="com.topcoder.direct.services.view.action.project.ProjectContestsCalendarViewAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>


		<action name="getProjectForumsStatusAJAX" class="getProjectForumsStatusAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="customerProjectsAjaxAction" class="com.topcoder.direct.services.view.action.project.CustomerProjectsAjaxAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="createNewCockpitProjectAjax" class="createNewProjectAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        
		<action name="listBillingAccountAction" class="contestFeesHomeAction">
            <interceptor-ref name="projectFeeStack"/>
            <result name="success">/WEB-INF/billing/billing_account_list.jsp</result>
        </action>

        <action name="cancelFeesManagement" class="com.topcoder.direct.services.view.action.ForwardAction"> 
            <result name="success" type="redirectAction">
                <param name="actionName">dashboardNotifications</param>
                <param name="pn">fee</param>
            </result>
        </action>
        
        <action name="createContestFeesHome" class="createFeesHomeAction">
            <interceptor-ref name="projectFeeStack"/>
            <result name="success">/WEB-INF/billing/billing_account_create_fees_list.jsp</result>
        </action>
        
        <action name="listContestFeesAction" class="listBillingProjectContestFeesAction">
            <interceptor-ref name="projectFeeStack"/>
            <result name="success">/WEB-INF/billing/billing_account_contest_fee.jsp</result>
        </action>
        
        <action name="saveContestFeesAction" class="saveContestFeesAction">
            <interceptor-ref name="projectFeeStack"/>
            <result name="success" type="redirectAction">
                <param name="actionName">dashboardNotifications</param>
                <param name="pn">fee</param>
            </result>
            <result name="input">/WEB-INF/billing/billing_account_contest_fee.jsp</result>
        </action>

        <action name="createContestFeesAction" class="createContestFeesAction">
            <interceptor-ref name="projectFeeStack"/>
            <result name="success" type="redirectAction">
                <param name="actionName">dashboardNotifications</param>
                <param name="pn">fee</param>
            </result>
            <result name="input">/WEB-INF/billing/billing_account_create_fees_list.jsp</result>
        </action>

        <action name="internalStats" class="com.topcoder.direct.services.view.action.stats.InternalStatsAction">
          <param name="excelFile">@excelFile@</param>
          <interceptor-ref name="securedPreProcessorStack"/>
          <result name="success">/WEB-INF/internal-stats.jsp</result>
        </action>
    </package>

    <package name="base" namespace="/base" extends="default">
        <interceptors>
            <interceptor-stack name="defaultDirectStack">
                <interceptor-ref name="exception">
                    <param name="logEnabled">true</param>
                    <param name="logLevel">ERROR</param>
                </interceptor-ref>
                <interceptor-ref name="alias"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="i18n"/>
                <interceptor-ref name="params">
                  <param name="acceptParamNames">contestId,projectId</param>
                  <param name="excludeParams">dojo\..*,^struts\..*,directjs.*</param>
                </interceptor-ref>
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="chain"/>
                <interceptor-ref name="debugging"/>
                <interceptor-ref name="scopedModelDriven"/>
                <interceptor-ref name="modelDriven"/>
                <interceptor-ref name="fileUpload"/>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="multiselect"/>
                <interceptor-ref name="staticParams"/>
                <interceptor-ref name="actionMappingParams"/>
                <interceptor-ref name="params">
                  <param name="excludeParams">dojo\..*,^struts\..*,directjs.*</param>
                </interceptor-ref>
                <interceptor-ref name="conversionError"/>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
            </interceptor-stack>

            <!-- base stack -->
            <interceptor-stack name="baseStack">
                <interceptor-ref name="defaultDirectStack"/>
                <interceptor-ref name="authnInterceptor"/>
                <interceptor-ref name="loggingInterceptor"/>
            </interceptor-stack>
        </interceptors>

        <default-interceptor-ref name="baseStack"/>
    </package>

    <package name="launch" namespace="/launch" extends="base">
        <action name="home" class="launchContestAction">
            <result>/WEB-INF/launch-contest.jsp</result>
        </action>

        <action name="createProject" class="createProjectAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="saveDraftContest" class="saveDraftContestAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="getStudioConfigs" method="getStudioConfigs" class="commonAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="documentUpload" class="documentUploadAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="removeDocument" class="removeDocumentAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="downloadDocument" class="downloadDocumentAction">
            <param name="uploadedFilesRootDir">@uploadedFilesRootDir@</param>
            <result type="stream">
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="contentType">${document.mimeType.description}</param>
                <param name="inputName">inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>

        <action name="getCategories" method="getCategories" class="commonAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="getCapacityFullDates" class="getCapacityFullDatesAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="getBillingProjectContestFees" method="getBillingProjectContestFees" class="commonAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="getDirectProjectCopilots" method="getDirectProjectCopilots" class="commonAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="getDesignComponents" method="getDesignComponents" class="commonAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
    </package>

    <package name="contest" namespace="/contest" extends="base">
        <action name="detail" class="getContestAction">
            <interceptor-ref name="securedContestStack"/>
            <result>/WEB-INF/contest-details2.jsp</result>
        </action>

        <action name="receipt" class="getContestReceiptAction">
            <interceptor-ref name="securedContestStack"/>
            <result>/WEB-INF/contest-receipt.jsp</result>
        </action>

        <action name="detailJson" class="getContestAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="repostContest" class="repostAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="newVersion" class="newVersionAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="submissions" class="contestSubmissionsAction">
            <result name="grid">/WEB-INF/studio-submissions-grid.jsp</result>
            <result name="list">/WEB-INF/studio-submissions-list.jsp</result>
            <result name="milestone" type="redirectAction">
                <param name="actionName">submissions</param>
                <param name="namespace">/contest</param>
                <param name="projectId">${projectId}</param>
                <param name="formData.viewType">GRID</param>
                <param name="formData.roundType">MILESTONE</param>
            </result>
        </action>

        <action name="studioSubmission" class="studioSubmissionAction">
            <result>/WEB-INF/studio-submissions-single.jsp</result>
        </action>
        
        <action name="updateSubmissionFeedback" class="updateStudioSubmissionFeedbackAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
			<result name="error" type="json" />
        </action>

        <action name="hasSubmissionFeedback" class="hasStudioSubmissionFeedbackAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result type="json" />
        </action>

        <action name="checkout" class="studioSubmissionCheckoutAction">
            <result name="confirm">/WEB-INF/studio-final-checkout-confirmation.jsp</result>
            <result>/WEB-INF/studio-submissions-checkout.jsp</result>
        </action>

        <action name="checkoutConfirm" class="studioSubmissionCheckoutAction">
            <result>/WEB-INF/studio-final-checkout-confirmation.jsp</result>
        </action>

        <action name="saveContestMilestoneSubmissionRank" class="saveContestSubmissionRankAction">
            <result type="redirectAction">
                <param name="actionName">submissions</param>
                <param name="namespace">/contest</param>
                <param name="projectId">${projectId}</param>
                <param name="formData.viewType">GRID</param>
                <param name="formData.roundType">FINAL</param>
            </result>
        </action>

        <action name="saveContestSubmissionRank" class="saveContestSubmissionRankAction">
            <result type="redirectAction">
                <param name="actionName">checkoutConfirm</param>
                <param name="namespace">/contest</param>
                <param name="projectId">${projectId}</param>
                <param name="formData.viewType">CHECKOUT_CONFIRM</param>
                <param name="formData.roundType">${roundType}</param>
            </result>
        </action>

        <action name="softwareSubmissions" class="softwareContestSubmissionsAction">
            <interceptor-ref name="securedContestStack"/>
            <result>/WEB-INF/software-submissions-list.jsp</result>
        </action>

        <action name="studioNoWinner" class="studioNoWinnerAction">
            <result>/WEB-INF/studio-nowinner.jsp</result>
        </action>

        <action name="studioNoWinnerDecide" class="studioNoWinnerAction">
            <result>/WEB-INF/studio-nowinner-decide.jsp</result>
        </action>

        <action name="studioNoWinnerAbandoned" class="studioAbandonContestAction">
            <result>/WEB-INF/studio-nowinner-abandoned.jsp</result>
        </action>

        <action name="updateGeneralSubmissionsFeedback" class="updateStudioGeneralFeedbackAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="hasGeneralSubmissionsFeedback" class="hasStudioGeneralFeedbackAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result type="json" />
        </action>

        <action name="startSpecReview" class="startSpecificationReviewAction">
            <result type="redirectAction">
                <param name="actionName">detail</param>
                <param name="namespace">/contest</param>
                <param name="projectId">${projectId}</param>
            </result>
        </action>

        <action name="viewSpecReview" class="viewSpecReviewAction">
            <interceptor-ref name="securedContestStack"/>
            <result>/WEB-INF/software-specification-review.jsp</result>
        </action>

        <action name="downloadSoftwareSubmission" class="downloadSoftwareSubmissionAction">
            <result type="stream">
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="contentType">application/octet-stream</param>
                <param name="inputName">inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>

        <action name="downloadFinalFix" class="downloadFinalFix">
            <result type="stream">
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="contentType">application/octet-stream</param>
                <param name="inputName">inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>
    </package>
    
    <package name="ajax" namespace="/ajax" extends="base">
        <action name="saveSpecReviewComment" class="saveSpecReviewCommentAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        
        <action name="resubmitSpecReview" class="resubmitSpecReviewAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
    </package>
    
    <!-- For Copilot Tab-->
    <package name="copilot" namespace="/copilot" extends="base">
        <action name="launchCopilotContest" class="getACopilotAction">
            <result>/WEB-INF/launch-copilot-contest.jsp</result>
        </action>

		<action name="postACopilot" class="launchContestAction">
            <result>/WEB-INF/post-a-copilot.jsp</result>
        </action>
        
        <action name="selectFromCopilotPool" class="getACopilotAction">
            <result>/WEB-INF/copilot-pool.jsp</result>
        </action>
        
        <action name="manageCopilots" class="copilotManageAction">
            <result>/WEB-INF/manage-copilots.jsp</result>
        </action>
        
        <action name="processCopilotProjects" class="copilotProjectAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="listCopilotPostings" class="listCopilotContestsAction">
            <result>/WEB-INF/copilot-contests.jsp</result>
        </action>
        <action name="copilotContestDetails" class="getContestAction">
            <result>/WEB-INF/copilot-contests-details.jsp</result>
        </action>
        <action name="listCopilotContestRegistrants" class="copilotContestsRegistrantsAction">
            <result type="chain">
                <param name="actionName">setCopilotContestRegistrantProfiles</param>
                <param name="namespace">/copilot</param>
            </result>
        </action>

        <action name="copilotPostingReceipt" class="getContestReceiptAction">
                 <result>/WEB-INF/copilot-receipt.jsp</result>
        </action>

        <action name="listCopilotContestSubmissions" class="copilotPostingContestSubmissionsAction">
            <result type="chain">
                <param name="actionName">setCopilotContestSubmissionProfiles</param>
                <param name="namespace">/copilot</param>
            </result>
        </action>
        <action name="setCopilotContestRegistrantProfiles" class="allCopilotsListAction">
            <result>/WEB-INF/copilot-contests-registrants.jsp</result>
        </action>
        <action name="setCopilotContestSubmissionProfiles" class="allCopilotsListAction">
            <result>/WEB-INF/copilot-contests-submissions.jsp</result>
        </action>
        <action name="selectCopilot" class="selectCopilotAction">
            <result name="success" type="redirectAction">
                <param name="actionName">listCopilotContestSubmissions</param>
                <param name="namespace">/copilot</param>
                <param name="projectId">${projectId}</param>
            </result>
        </action>
        <action name="documentUpload" class="documentUploadAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="saveDraftContest" class="saveDraftContestAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
        <action name="createProject" class="createProjectAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
    </package>    
    
    <package name="preference" namespace="/preference" extends="base">                         
        <action name="updatePreferences" class="updateUserPreferencesAction">
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>            
    </package>

    <package name="projectMetadata" namespace="/metadata" extends="base">

        <action name="projectMetadata" class="projectMetadataAction">
            <interceptor-ref name="baseStack"/>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="authnInterceptor"/>
            <result>/WEB-INF/metadata/project-metadata-demo.jsp</result>
        </action>

        <action name="addProjectMetaData" method="addProjectMetaData" class="projectMetadataAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="getAllProjectMetadata" method="getAllProjectMetadata" class="projectMetadataAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="deleteProjectMetadata" method="deleteProjectMetadata" class="projectMetadataAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="updateProjectMetadata" method="updateProjectMetadata" class="projectMetadataAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="searchProjectByMetadata" method="searchProjectByMetadata" class="projectMetadataAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>

        <action name="addProjectMetadataKey" method="addProjectMetadataKey" class="projectMetadataAction">
            <interceptor-ref name="securedDefaultStack"/>
            <result name="success" type="json" />
            <result name="error" type="json" />
        </action>
    </package>

</struts>
